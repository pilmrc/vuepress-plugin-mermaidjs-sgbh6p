# Introduction

**Issue description:** 
Site found when automatic scanning machine submit the WIP release request( call iFactory API WIPReleaseByAssembly ), The performance of the PRD environment is much worse than STG environment. Below is time comparison in the log information:a ) Call the API in PRD environment, cost more than 4 seconds one time to finished the WIP release. (Send 8 SN one time cost more than 4 second, but when send just 1 SN one time cost 0.5 second)
![](https://attachments.office.net/owa/Terry_Yin@Jabil.com/service.svc/s/GetFileAttachment?id=AAMkADZmMDVjNWIzLTcxMGYtNGYxYi05N2Q5LWMyODViNWRmZWZhMgBGAAAAAAAW1sEQLy%2BZRZwAfiE3sr9GBwAOaTAzFWPoRqL%2F8YT8od0lAAAAAAEJAAAOaTAzFWPoRqL%2F8YT8od0lAAIj7zkBAAABEgAQAOtQ2P%2BJ5aNJoA4gG5lXV4I%3D&X-OWA-CANARY=vC_zKNPTTk6A7-pDGDGCm5AzjTSqhdYY_x0ESX-x5KBQutC3M75Jr_F73rfue06Fu2M7QEB5DFI.&token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjA2MDBGOUY2NzQ2MjA3MzdFNzM0MDRFMjg3QzQ1QTgxOENCN0NFQjgiLCJ4NXQiOiJCZ0Q1OW5SaUJ6Zm5OQVRpaDhSYWdZeTN6cmciLCJ0eXAiOiJKV1QifQ.eyJ2ZXIiOiJFeGNoYW5nZS5DYWxsYmFjay5WMSIsImFwcGN0eHNlbmRlciI6Ik93YURvd25sb2FkQGJjODc2YjIxLWYxMzQtNGMxMi1hMjY1LThlZDI2YjdmMGYzYiIsImFwcGN0eCI6IntcIm1zZXhjaHByb3RcIjpcIm93YVwiLFwicHJpbWFyeXNpZFwiOlwiUy0xLTUtMjEtMjgwNTA1ODg4MS0yMDIzNTc3MzYwLTE2NzEzMzQ2OTQtMjM4NzQ4MjhcIixcInB1aWRcIjpcIjExNTM3NjU5MzIwMDQ2OTc3OTNcIixcIm9pZFwiOlwiZjE4ZjM3NWUtY2Q3NC00ODIyLTg3ZDgtNzIwOGU0NjM5ZTNiXCIsXCJzY29wZVwiOlwiT3dhRG93bmxvYWRcIn0iLCJuYmYiOjE1NDg3MzkzMzIsImV4cCI6MTU0ODczOTkzMiwiaXNzIjoiMDAwMDAwMDItMDAwMC0wZmYxLWNlMDAtMDAwMDAwMDAwMDAwQGJjODc2YjIxLWYxMzQtNGMxMi1hMjY1LThlZDI2YjdmMGYzYiIsImF1ZCI6IjAwMDAwMDAyLTAwMDAtMGZmMS1jZTAwLTAwMDAwMDAwMDAwMC9hdHRhY2htZW50cy5vZmZpY2UubmV0QGJjODc2YjIxLWYxMzQtNGMxMi1hMjY1LThlZDI2YjdmMGYzYiJ9.eJyKCcMx-r4fbFjQqjRXaArjQWQOLlUcajmMFPMcXhWzw-JQInCg-lMQKmtQ5ROxPxrIYLOAqXMaUbqGKDLO6mrvW_jD_M4EiCaYWZ_VvhpqKcefuN9_1aPsOKPF66969Bm3Tem1nmoSoT3S2Ohw_FZeoPWpIGDZKRy-cYiVRSETVydA7B6T0BCYDH2_LT3hSLFJkqq7u-df7CeZLQv3M48GkzMHPHDwHZw9Nayd6ZQuyMFYrZnAn5qD50d6ul3qHFyQkgfMx7Cx1rB19Pn9l0SrnE-PW4FYz15AT3gHuZScYq9wnkMs9U7dsCjXE1DHyJYvbL-MT-Rsu5g8qR_XJw&owa=outlook.office.com&isImagePreview=True)


b ) Call the API in STG environment, cost less than 1 seconds one time to finished the WIP release.
![](https://attachments.office.net/owa/Terry_Yin@Jabil.com/service.svc/s/GetFileAttachment?id=AAMkADZmMDVjNWIzLTcxMGYtNGYxYi05N2Q5LWMyODViNWRmZWZhMgBGAAAAAAAW1sEQLy%2BZRZwAfiE3sr9GBwAOaTAzFWPoRqL%2F8YT8od0lAAAAAAEJAAAOaTAzFWPoRqL%2F8YT8od0lAAIj7zkBAAABEgAQAPJIHNjG381PmMZgDjy85NQ%3D&X-OWA-CANARY=cWHXPEyhGUWRcLfsTgE_E_Agr4SshdYYT6pwwScR8Gv54QwuliYF4MxtLjEKwuO8k5NKF4zQWls.&token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjA2MDBGOUY2NzQ2MjA3MzdFNzM0MDRFMjg3QzQ1QTgxOENCN0NFQjgiLCJ4NXQiOiJCZ0Q1OW5SaUJ6Zm5OQVRpaDhSYWdZeTN6cmciLCJ0eXAiOiJKV1QifQ.eyJ2ZXIiOiJFeGNoYW5nZS5DYWxsYmFjay5WMSIsImFwcGN0eHNlbmRlciI6Ik93YURvd25sb2FkQGJjODc2YjIxLWYxMzQtNGMxMi1hMjY1LThlZDI2YjdmMGYzYiIsImFwcGN0eCI6IntcIm1zZXhjaHByb3RcIjpcIm93YVwiLFwicHJpbWFyeXNpZFwiOlwiUy0xLTUtMjEtMjgwNTA1ODg4MS0yMDIzNTc3MzYwLTE2NzEzMzQ2OTQtMjM4NzQ4MjhcIixcInB1aWRcIjpcIjExNTM3NjU5MzIwMDQ2OTc3OTNcIixcIm9pZFwiOlwiZjE4ZjM3NWUtY2Q3NC00ODIyLTg3ZDgtNzIwOGU0NjM5ZTNiXCIsXCJzY29wZVwiOlwiT3dhRG93bmxvYWRcIn0iLCJuYmYiOjE1NDg3NDA1MzIsImV4cCI6MTU0ODc0MTEzMiwiaXNzIjoiMDAwMDAwMDItMDAwMC0wZmYxLWNlMDAtMDAwMDAwMDAwMDAwQGJjODc2YjIxLWYxMzQtNGMxMi1hMjY1LThlZDI2YjdmMGYzYiIsImF1ZCI6IjAwMDAwMDAyLTAwMDAtMGZmMS1jZTAwLTAwMDAwMDAwMDAwMC9hdHRhY2htZW50cy5vZmZpY2UubmV0QGJjODc2YjIxLWYxMzQtNGMxMi1hMjY1LThlZDI2YjdmMGYzYiJ9.BjEb7I9bQhtR9NhU_rAN_xweAbBk6rFwSU3ai1Vysr2nt4RzLLSyDU4BDayXhAFZeU7B9MfY6tp7dLdDTXj3Z35nfaKyzHeWrE5WDEliIUmZVq1PFRthEjkDrP79URXU0JOo0J0js89S9RkcWvn0PvfFnVr6IxAL6J4K6h0EZbsfcKz6x3EiRKVgSiSLKBJHhqC9PPQJGczJqHdeMHMJamn1UaL_eLU1WpuVba0eHsDMcmHcmSyVRhwsSByzkkFJJ0TGGDyBnUNqIwlsNfKmk1MIseSDSS4coNYnPwC_3LunaacmL8_7hO-LVXtl1t9kMvOvgoPBkMRr1u9ZAb3ctA&owa=outlook.office.com&isImagePreview=True)


**Troubleshooting:**  

- Request DBA to help to trace the transaction status data at the back end and we found:


The process as following:
- Pass in serial number list

- Parse serial number list into individual serial numbers

- Loop the list and process serial number one by one.
From the trace file, the slowness is coming from step 3. From overall point of view the query is not that slow – 300ms
![](https://attachments.office.net/owa/Terry_Yin@Jabil.com/service.svc/s/GetFileAttachment?id=AAMkADZmMDVjNWIzLTcxMGYtNGYxYi05N2Q5LWMyODViNWRmZWZhMgBGAAAAAAAW1sEQLy%2BZRZwAfiE3sr9GBwAOaTAzFWPoRqL%2F8YT8od0lAAAAAAEMAAAOaTAzFWPoRqL%2F8YT8od0lAAIj7vJKAAABEgAQAOsTdhOpSLpOufpYgf%2BCqdg%3D&X-OWA-CANARY=1z7YgW4MjECrYiiIpwDeVwBvWV6thdYYliNmIKue49BbAviGbLuLGcjYhogIUb5wKTNa6GkA3KM.&token=eyJhbGciOiJSUzI1NiIsImtpZCI6IjA2MDBGOUY2NzQ2MjA3MzdFNzM0MDRFMjg3QzQ1QTgxOENCN0NFQjgiLCJ4NXQiOiJCZ0Q1OW5SaUJ6Zm5OQVRpaDhSYWdZeTN6cmciLCJ0eXAiOiJKV1QifQ.eyJ2ZXIiOiJFeGNoYW5nZS5DYWxsYmFjay5WMSIsImFwcGN0eHNlbmRlciI6Ik93YURvd25sb2FkQGJjODc2YjIxLWYxMzQtNGMxMi1hMjY1LThlZDI2YjdmMGYzYiIsImFwcGN0eCI6IntcIm1zZXhjaHByb3RcIjpcIm93YVwiLFwicHJpbWFyeXNpZFwiOlwiUy0xLTUtMjEtMjgwNTA1ODg4MS0yMDIzNTc3MzYwLTE2NzEzMzQ2OTQtMjM4NzQ4MjhcIixcInB1aWRcIjpcIjExNTM3NjU5MzIwMDQ2OTc3OTNcIixcIm9pZFwiOlwiZjE4ZjM3NWUtY2Q3NC00ODIyLTg3ZDgtNzIwOGU0NjM5ZTNiXCIsXCJzY29wZVwiOlwiT3dhRG93bmxvYWRcIn0iLCJuYmYiOjE1NDg3NDA4MzIsImV4cCI6MTU0ODc0MTQzMiwiaXNzIjoiMDAwMDAwMDItMDAwMC0wZmYxLWNlMDAtMDAwMDAwMDAwMDAwQGJjODc2YjIxLWYxMzQtNGMxMi1hMjY1LThlZDI2YjdmMGYzYiIsImF1ZCI6IjAwMDAwMDAyLTAwMDAtMGZmMS1jZTAwLTAwMDAwMDAwMDAwMC9hdHRhY2htZW50cy5vZmZpY2UubmV0QGJjODc2YjIxLWYxMzQtNGMxMi1hMjY1LThlZDI2YjdmMGYzYiJ9.S3_VEfrNQPXHuwZr_VKGlCFFHQb0SKz3ARP-qpLM2AYF3MmOwRohgA-FpdEstsJ4HYdHOzF9ORkT5OdCuwQVmrFIXnxshAI5j5cuWIVGdqyCwFL4eJou2ISaeNZdEAC8X_u3Alw50gpff3Ifn60wKyOMxWOO43qta7h0mgBa0bolcrDav3Q66OdjCvABgx9aDz4ENU-jaxVp_vJ4vGxap-X5Jg4NEfgBlcgzp007tAHpElKlXGTbDgsNQEeD17HLX0qt2kN3Eb3-h4AyEdsmBuhkHIHi2s67b_yL9u1Pncph4SCpPeAfLvfN7oyV4D815jtkXXzYqNCCWE24y0vGug&owa=outlook.office.com&isImagePreview=True)


But, if there are 8 serial numbers to be processed, the overall time consumption is considerable.

300 \* 8 = 2.4+ seconds. That is close to user reports 3 + seconds for this batch.
Checked database index. It seems the index status is not good. 
- Rebuilt that table index by DBA.
3. Verification test again.  It cost 0.5 second for 8 SN one time in PRD DB. Site continue  following the status in shop floor.


**Refer the task:**  [IM01962602](iFactory-JGP-MES/iFactory-JGP-MES-Home/iFactory-JGP-MS/TROUBLESHOOTING-GUIDE/Automation%2DIntegration%2DAPI/Automatic-Bar%2Dcode-scanning-performance-troubleshooting.md)


